<!doctype html><html lang=en-US data-theme=default><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><title>LLM-RL-GRPO-and its Variants | Jiatong Blog</title><meta name=description content="PPO 的改进算法及各类变体 (DAPO, DRPO, GFPO, GRPO-Training-free)"><meta name=keywords content="大模型,强化学习"><meta name=author content="Hugo Narrow"><meta name=language content="en-US"><meta name=robots content="index, follow"><link rel=canonical href=https://mydocts.github.io/jiatong.github.io/posts/grpo-variants/><link rel=icon type=image/svg+xml href=favicon.svg><link rel=manifest href=https://mydocts.github.io/jiatong.github.io/site.webmanifest><meta property="og:url" content="https://mydocts.github.io/jiatong.github.io/posts/grpo-variants/"><meta property="og:site_name" content="Jiatong Blog"><meta property="og:title" content="LLM-RL-GRPO-and its Variants"><meta property="og:description" content="PPO 的改进算法及各类变体 (DAPO, DRPO, GFPO, GRPO-Training-free)"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-14T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-14T00:00:00+00:00"><meta property="article:tag" content="大模型"><meta property="article:tag" content="强化学习"><meta property="og:image" content="https://mydocts.github.io/jiatong.github.io/images/og-default.avif"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://mydocts.github.io/jiatong.github.io/images/og-default.avif"><meta name=twitter:title content="LLM-RL-GRPO-and its Variants"><meta name=twitter:description content="PPO 的改进算法及各类变体 (DAPO, DRPO, GFPO, GRPO-Training-free)"><meta itemprop=name content="LLM-RL-GRPO-and its Variants"><meta itemprop=description content="PPO 的改进算法及各类变体 (DAPO, DRPO, GFPO, GRPO-Training-free)"><meta itemprop=datePublished content="2025-12-14T00:00:00+00:00"><meta itemprop=dateModified content="2025-12-14T00:00:00+00:00"><meta itemprop=wordCount content="3119"><meta itemprop=image content="https://mydocts.github.io/jiatong.github.io/images/og-default.avif"><meta itemprop=keywords content="大模型,强化学习"><script>window.HUGO_SEARCH_CONFIG={searchIndexURL:'"/index.json"'}</script><script>window.HUGO_GALLERY_CONFIG={justified_gallery:!1,lightbox:!1,justified:'{"calculateitemsheight":false,"gutter":30,"lastrow":"center","maxrowscount":999999,"resizedebounce":100,"rowheight":300,"rowheighttolerance":0.25,"transitionduration":"0.3s"}',lightbox_options:'{"descposition":"bottom","draggable":true,"height":"80vh","loop":true,"preload":true,"touchnavigation":true,"width":"80vw","zoomable":true}'}</script><link rel=stylesheet href=https://mydocts.github.io/jiatong.github.io/css/compiled.min.0fdcf186a51cbe31d817748e6625893fdecb7c4081cdfd4c090e5b6864f6d4b8.css integrity="sha256-D9zxhqUcvjHYF3SOZiWJP97LfECBzf1MCQ5baGT21Lg=" crossorigin=anonymous><link rel=stylesheet href=https://mydocts.github.io/jiatong.github.io/css/chroma.min.491df36221f739b5948a747a0351f100ee7ccaaf466d9f46288bf06de1d59123.css integrity="sha256-SR3zYiH3ObWUinR6A1HxAO58yq9GbZ9GKIvwbeHVkSM=" crossorigin=anonymous><link rel=stylesheet href=https://mydocts.github.io/jiatong.github.io/css/custom/table-scroll.min.5b383174bbb66958447e4bcf95ca72a114556e2677ac27cfc602703fd5685f99.css integrity="sha256-WzgxdLu2aVhEfkvPlcpyoRRVbiZ3rCfPxgJwP9VoX5k=" crossorigin=anonymous><script src=https://mydocts.github.io/jiatong.github.io/js/main.ba969e49a7a874e6938fe689a7dcaa00cb64cb4d429c2cf98d09bde512a16c6d.js integrity="sha256-upaeSaeodOaTj+aJp9yqAMtky01CnCz5jQm95RKhbG0=" crossorigin=anonymous></script><script src=https://mydocts.github.io/jiatong.github.io/js/gumshoe.polyfills.min.js></script><script src=https://mydocts.github.io/jiatong.github.io/js/toc.660e1ba968c600238038998fa7b9f0b92a6db1e27f7983f0a3868da6e335c773.js integrity="sha256-Zg4bqWjGACOAOJmPp7nwuSptseJ/eYPwo4aNpuM1x3M=" crossorigin=anonymous defer></script><script src=https://mydocts.github.io/jiatong.github.io/js/search.de3eba3540834efb8328121784bff4774e06362412ee41eee665f5b4f987f393.js integrity="sha256-3j66NUCDTvuDKBIXhL/0d04GNiQS7kHu5mX1tPmH85M=" crossorigin=anonymous defer></script><script src=https://mydocts.github.io/jiatong.github.io/js/dock.e68dfcd7c5d37f18f40d8855905ee50c98c58f3b204d0ffb207d4956c987ead0.js integrity="sha256-5o3818XTfxj0DYhVkF7lDJjFjzsgTQ/7IH1JVsmH6tA=" crossorigin=anonymous defer></script><script>(function(){const e=localStorage.getItem("theme")||"system",n=localStorage.getItem("colorScheme")||"default";document.documentElement.setAttribute("data-theme",n);function t(){e==="dark"||e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}t(),e==="system"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t)})()</script></head><body class="bg-background text-foreground min-h-screen antialiased"><div id=reading-progress-container class="reading-progress-container pointer-events-none fixed top-0 right-0 left-0 z-50 transition-opacity duration-300 ease-out" data-height=3 data-smooth-scroll=true data-hide-on-complete=false><div class="reading-progress-bg w-full"></div><div id=reading-progress-bar class="from-primary to-primary/80 reading-progress-bar
transition-all duration-150 ease-out
absolute top-0 left-0 w-0 bg-gradient-to-r"></div></div><script>(function(){"use strict";const t=document.getElementById("reading-progress-container"),o=document.getElementById("reading-progress-bar");if(!t||!o)return;const a={smoothScroll:t.dataset.smoothScroll==="true",hideOnComplete:t.dataset.hideOnComplete==="true"};let n=!0,l=null;function r(){const t=window.pageYOffset||document.documentElement.scrollTop,n=document.documentElement.scrollHeight,s=window.innerHeight,e=n-s;return e<=0?0:Math.min(Math.max(t/e*100,0),100)}function c(){const e=r();o.style.width=e+"%",a.hideOnComplete&&e>=99.5?n&&(t.style.opacity="0",n=!1):n||(t.style.opacity="1",n=!0)}let s=!1;function e(){s||(requestAnimationFrame(()=>{c(),s=!1}),s=!0)}function i(){window.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),document.addEventListener("visibilitychange",()=>{document.hidden||e()}),e(),window.addEventListener("beforeunload",()=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",i):i()})()</script><header class="mx-auto max-w-4xl px-4 py-6"><div class="border-border bg-card/80 flex items-center rounded-xl border px-6 py-4 shadow-sm backdrop-blur-sm"><div class="hidden w-full items-center md:flex"><div class="flex items-center"><a href=https://mydocts.github.io/jiatong.github.io/ class="flex h-10 w-10 items-center justify-center overflow-hidden rounded-full transition-transform duration-200 hover:scale-105" aria-label="Jiatong Blog"><img src=https://mydocts.github.io/jiatong.github.io/images/touxiang.jpg alt="Jiatong Blog" class="h-full w-full object-cover"></a></div><nav class="mx-8 flex flex-1 items-center justify-center"><div class="flex items-center space-x-1"><a href=https://mydocts.github.io/jiatong.github.io/posts/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" aria-label="nav.posts" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
<span>Posts
</span></a><a href=https://mydocts.github.io/jiatong.github.io/categories/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" aria-label="nav.categories" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
<span>Categories
</span></a><a href=https://mydocts.github.io/jiatong.github.io/tags/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" aria-label="nav.tags" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512.0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828.0l-7-7A1.994 1.994.0 013 12V7a4 4 0 014-4z"/></svg>
<span>Tags
</span></a><a href=https://mydocts.github.io/jiatong.github.io/archives/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none"><svg class="h-5 w-5" aria-label="nav.archives" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
<span>Archives</span></a></div></nav><div class="flex items-center space-x-2"><div class=relative><button id=language-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=language aria-label="Switch language" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" aria-label="Switch language" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8 6 6m-7 0 6-6 2-3M2 5h12M7 2h1m14 20-5-10-5 10m2-4h6"/></svg></button><div id=language-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=language role=menu aria-labelledby=language-toggle><a href=https://mydocts.github.io/jiatong.github.io/en/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem aria-current=true><span class=font-medium>English</span></a><a href=https://mydocts.github.io/jiatong.github.io/zh-cn/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem><span class=font-medium>简体中文</span></a></div></div><div class=relative><button id=color-scheme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=color-scheme aria-label="Toggle theme" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" aria-label="Toggle theme" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z"/></svg></button><div id=color-scheme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=color-scheme><button data-color-scheme=default class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme=claude class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Claude</span></button><button data-color-scheme=bumblebee class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme=emerald class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme=nord class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme=sunset class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme=abyss class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme=dracula class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme=amethyst class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme=slate class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme=twitter class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div></div><div class=relative><button id=theme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=theme aria-label="Toggle theme" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 sun-icon hidden relative z-10" aria-label="Light" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<svg class="h-5 w-5 moon-icon hidden relative z-10" aria-label="Dark" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<svg class="h-5 w-5 system-icon hidden relative z-10" aria-label="System" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg></button><div id=theme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=theme><button data-theme=light class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="Light" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<span>Light</span></button><button data-theme=dark class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="Dark" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<span>Dark</span></button><button data-theme=system class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="System" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg>
<span>System</span></button></div></div></div></div><div class="flex w-full items-center justify-between md:hidden"><div class=relative><button id=mobile-menu-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:bg-accent hover:text-foreground flex h-10 w-10 items-center justify-center rounded-lg border transition-colors duration-200" data-dropdown-type=mobile-menu aria-label=Menu aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5" aria-label="Menu" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg></button><div id=mobile-menu class="mobile-menu dropdown-menu border-border bg-popover/95 absolute top-12 left-0 z-[60] hidden w-80 max-w-[calc(100vw-2rem)] rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out md:hidden" data-dropdown-type=mobile-menu role=menu aria-labelledby=mobile-menu-toggle><nav class="flex flex-col"><a href=https://mydocts.github.io/jiatong.github.io/posts/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" aria-label="nav.posts" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
<span>Posts
</span></a><a href=https://mydocts.github.io/jiatong.github.io/categories/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" aria-label="nav.categories" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/></svg>
<span>Categories
</span></a><a href=https://mydocts.github.io/jiatong.github.io/tags/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" aria-label="nav.tags" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512.0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828.0l-7-7A1.994 1.994.0 013 12V7a4 4 0 014-4z"/></svg>
<span>Tags
</span></a><a href=https://mydocts.github.io/jiatong.github.io/archives/ class="nav-link
text-muted-foreground hover:text-primary hover:bg-primary/10
focus:ring-primary/20 relative flex items-center gap-3 rounded-md px-4 py-3 text-sm font-medium transition-all duration-200 ease-out hover:translate-x-1 focus:ring-2 focus:outline-none" role=menuitem><svg class="h-5 w-5" aria-label="nav.archives" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/></svg>
<span>Archives</span></a></nav></div></div><div class="flex items-center space-x-2"><div class=relative><button id=language-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=language aria-label="Switch language" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" aria-label="Switch language" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m5 8 6 6m-7 0 6-6 2-3M2 5h12M7 2h1m14 20-5-10-5 10m2-4h6"/></svg></button><div id=language-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=language role=menu aria-labelledby=language-toggle><a href=https://mydocts.github.io/jiatong.github.io/en/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem aria-current=true><span class=font-medium>English</span></a><a href=https://mydocts.github.io/jiatong.github.io/zh-cn/ class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none" role=menuitem><span class=font-medium>简体中文</span></a></div></div><div class=relative><button id=color-scheme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=color-scheme aria-label="Toggle theme" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 relative z-10" aria-label="Toggle theme" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v6a2 2 0 002 2h4a2 2 0 002-2V5z"/></svg></button><div id=color-scheme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-44 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=color-scheme><button data-color-scheme=default class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Default</span></button><button data-color-scheme=claude class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Claude</span></button><button data-color-scheme=bumblebee class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Bumblebee</span></button><button data-color-scheme=emerald class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Emerald</span></button><button data-color-scheme=nord class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Nord</span></button><button data-color-scheme=sunset class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Sunset</span></button><button data-color-scheme=abyss class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Abyss</span></button><button data-color-scheme=dracula class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Dracula</span></button><button data-color-scheme=amethyst class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Amethyst</span></button><button data-color-scheme=slate class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Slate</span></button><button data-color-scheme=twitter class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><span>Twitter</span></button></div></div><div class=relative><button id=theme-toggle class="dropdown-toggle border-border bg-background text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 flex h-10 w-10 items-center justify-center rounded-lg border transition-all duration-300 ease-out hover:scale-105 focus:ring-2 focus:outline-none active:scale-95" data-dropdown-type=theme aria-label="Toggle theme" aria-expanded=false aria-haspopup=true>
<svg class="h-5 w-5 sun-icon hidden relative z-10" aria-label="Light" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<svg class="h-5 w-5 moon-icon hidden relative z-10" aria-label="Dark" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<svg class="h-5 w-5 system-icon hidden relative z-10" aria-label="System" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg></button><div id=theme-dropdown class="dropdown-menu border-border bg-popover/95 absolute top-12 right-0 z-[60] hidden w-40 rounded-lg border p-1 shadow-lg backdrop-blur-sm transition-all duration-200 ease-out" data-dropdown-type=theme><button data-theme=light class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="Light" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728.0-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
<span>Light</span></button><button data-theme=dark class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="Dark" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003.0 0012 21a9.003 9.003.0 008.354-5.646z"/></svg>
<span>Dark</span></button><button data-theme=system class="text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground flex w-full items-center rounded-md px-4 py-2 text-sm transition-all duration-200 ease-out focus:outline-none"><svg class="h-5 w-5 mr-3 h-4 w-4" aria-label="System" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17 9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5A2 2 0 003 5v10a2 2 0 002 2z"/></svg>
<span>System</span></button></div></div></div></div></div></header><main class="mx-auto max-w-4xl px-4 py-6"><nav class="breadcrumb mb-4 md:mb-6 py-1" aria-label="Breadcrumb navigation"><ol class="text-muted-foreground flex items-center space-x-1 md:space-x-2 text-sm overflow-x-auto whitespace-nowrap scrollbar-hide py-1"><li class=flex-shrink-0><a href=https://mydocts.github.io/jiatong.github.io/ class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02]"><svg class="h-4 w-4" aria-label="Home" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m3 12 2-2m0 0 7-7 7 7M5 10v10a1 1 0 001 1h3m10-11 2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
<span class="max-w-[4rem] md:max-w-none truncate">Home</span></a></li><li class="flex items-center gap-1 md:gap-2 min-w-0"><span class="text-muted-foreground/50 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></span><div class="flex items-center gap-1 md:gap-2 min-w-0"><a href=https://mydocts.github.io/jiatong.github.io/posts class="text-muted-foreground hover:text-primary hover:bg-primary/10 flex items-center gap-0.5 md:gap-1 rounded-lg px-1 md:px-3 py-0.5 md:py-1.5 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-[1.02] flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"/></svg>
<span class="max-w-[3rem] md:max-w-none truncate">Posts</span>
</a><span class="text-muted-foreground/50 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></span>
<span class="text-foreground flex items-center gap-0.5 md:gap-1 font-medium min-w-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/></svg>
<span class="max-w-[8rem] md:max-w-[16rem] lg:max-w-none truncate">LLM-RL-GRPO-and its Variants</span></span></div></li></ol></nav><header class=mb-8><div class=post-meta><h1 class="text-foreground mb-6 text-3xl leading-tight font-bold md:text-4xl">LLM-RL-GRPO-and its Variants</h1><div class="bg-card border-border flex flex-col gap-4 rounded-xl border p-6"><div class="text-muted-foreground flex flex-wrap items-center gap-4 text-sm"><div class="flex items-center gap-2"><svg class="h-4 w-4" aria-label="Published on" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg>
<time datetime=2025-12-14>December 14, 2025</time></div><div class="flex items-center gap-2"><svg class="h-4 w-4" aria-label="Reading time" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3A9 9 0 113 12a9 9 0 0118 0z"/></svg>
<span>7 minute</span></div><div class="flex items-center gap-2"><svg class="h-4 w-4" aria-label="Word count" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/></svg>
<span>3119 words</span></div></div><div class="flex flex-wrap items-center gap-4"><div class="flex items-center gap-2"><svg class="h-4 w-4" aria-label="Categories" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5A2 2 0 003 7z"/></svg>
<span class="text-muted-foreground mr-2 text-sm">Categories:</span><div class="flex flex-wrap gap-2"><a href=https://mydocts.github.io/jiatong.github.io/categories/%E5%8D%9A%E5%AE%A2/ class="bg-primary/10 text-primary hover:bg-primary/20 focus:ring-primary/20 inline-flex items-center rounded-full px-3 py-1 text-sm font-medium transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 hover:shadow-md focus:ring-2 focus:outline-none">博客</a></div></div><div class="flex items-center gap-2"><svg class="h-4 w-4" aria-label="Tags" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M12.586 2.586A2 2 0 0011.172 2H4A2 2 0 002 4v7.172a2 2 0 00.586 1.414l8.704 8.704a2.426 2.426.0 003.42.0l6.58-6.58a2.426 2.426.0 000-3.42z"/><circle cx="7.5" cy="7.5" r=".5" fill="currentColor"/></g></svg>
<span class="text-muted-foreground mr-2 text-sm">Tags:</span><div class="flex flex-wrap gap-2"><a href=https://mydocts.github.io/jiatong.github.io/tags/%E5%A4%A7%E6%A8%A1%E5%9E%8B/ class="bg-muted/50 text-muted-foreground hover:bg-primary/10 hover:text-primary focus:ring-primary/20 inline-flex items-center rounded px-2 py-1 text-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">#大模型
</a><a href=https://mydocts.github.io/jiatong.github.io/tags/%E5%BC%BA%E5%8C%96%E5%AD%A6%E4%B9%A0/ class="bg-muted/50 text-muted-foreground hover:bg-primary/10 hover:text-primary focus:ring-primary/20 inline-flex items-center rounded px-2 py-1 text-sm transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none">#强化学习</a></div></div></div></div></div></header><article class="prose prose-neutral dark:prose-invert mb-12 max-w-none"><p><strong>GRPO是针对LLM的一种改进PPO算法</strong></p><h1 id=回顾前置知识>回顾前置知识：</h1><h2 id=policy-gradient>Policy Gradient</h2>$$
\nabla_\theta J(\theta)
\approx
\frac{1}{N}
\sum_{n=1}^{N}
\sum_{t=1}^{T_n}
R(\tau^{(n)})
\nabla_\theta
\log P_\theta(a_t^{(n)} \mid s_t^{(n)})
$$<hr><p><strong>符号解释</strong></p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>$\nabla_\theta J(\theta)$</td><td><strong>目标函数（期望回报）关于参数$\theta$的梯度</strong>，即策略更新的方向。</td></tr><tr><td>$N$</td><td><strong>采样的轨迹数量（episodes）</strong>，即从环境中采样的完整回合数。</td></tr><tr><td>$T_n$</td><td>第$n$条轨迹的时间步数（episode的长度）。</td></tr><tr><td>$\tau^{(n)}$</td><td>第$n$条<strong>轨迹（trajectory）</strong>：<code>&lt;br></code> $\tau^{(n)} = (s_1^{(n)}, a_1^{(n)}, r_1^{(n)}, \dots, s_{T_n}^{(n)}, a_{T_n}^{(n)}, r_{T_n}^{(n)})$。</td></tr><tr><td>$R(\tau^{(n)})$</td><td><strong>整条轨迹的总回报（return）</strong>，通常为折扣累计奖励：<code>&lt;br></code> $R(\tau^{(n)}) = \sum_{t=1}^{T_n}\gamma^{t-1}r_t^{(n)}$。</td></tr><tr><td>$\nabla_\theta \log P_\theta(a_t^{(n)}\mid s_t^{(n)})$</td><td><strong>策略梯度项</strong>，表示策略在状态$s_t^{(n)}$下选择动作$a_t^{(n)}$的对数概率的梯度，用于指导参数更新。</td></tr><tr><td>$P_\theta(a_t^{(n)}\mid s_t^{(n)})$</td><td><strong>参数化策略（policy）</strong>，给定状态$s_t^{(n)}$时采取动作$a_t^{(n)}$的概率，由参数$\theta$控制。</td></tr></tbody></table><hr><p><strong>直观理解</strong>
这个公式的含义是：如果一条轨迹带来的总奖励$R(\tau)$很高，那么模型应该调整参数$\theta$，让在这条轨迹中采取的动作$a_t$的概率更高；反之则降低这些动作的概率。</p><h2 id=考虑动作影响时效>考虑动作影响时效</h2><p>Discounted Return（折扣回报）</p>$$
R_t^{(n)} = \sum_{t'=t}^{T_n} \gamma^{\,t'-t} r_{t'}^{(n)}
$$<p>符号解释</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>$t$、$t'$</td><td>时间步索引；$t'$ 是求和变量，从当前时间步 $t$ 开始一直到 $T_n$。</td></tr><tr><td>$\gamma$</td><td><strong>折扣因子（discount factor）</strong>，$0 < \gamma \le 1$。它控制未来奖励的重要性：越小表示越“短视”。</td></tr><tr><td>$r_{t'}^{(n)}$</td><td>第$n$ 条轨迹在时间步 $t'$ 获得的即时奖励（immediate reward）。</td></tr></tbody></table><hr><p><strong>直观理解</strong>
这个公式计算的是从某个时间步 $t$ 开始，到轨迹结束的所有未来奖励的加权和。
靠近当前的奖励权重大（因为$\gamma^{0}=1$），越往后的奖励会被折扣（因为$\gamma^{t'-t}$会变小）。</p><hr><p><strong>与策略梯度公式的关系</strong>
在策略梯度中，$R_t^{(n)}$ 通常替代 $R(\tau^{(n)})$ 用作加权项，使得每个时间步的梯度更新都考虑该时刻之后的未来回报：</p>$$
\nabla_\theta J(\theta)
\approx
\frac{1}{N}
\sum_{n=1}^{N}
\sum_{t=1}^{T_n}
R_t^{(n)}
\nabla_\theta
\log P_\theta(a_t^{(n)} \mid s_t^{(n)})
$$<h2 id=考虑到动作的相对优势>考虑到动作的相对优势</h2><p>Policy Gradient with Baseline</p>$$
\nabla_\theta J(\theta)
\approx
\frac{1}{N}
\sum_{n=1}^{N}
\sum_{t=1}^{T_n}
\big(R_t^{(n)} - B(s_t^{(n)})\big)
\nabla_\theta
\log P_\theta(a_t^{(n)} \mid s_t^{(n)})
$$<hr><p>符号解释</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>$B(s_t^{(n)})$</td><td><strong>基线函数（baseline function）</strong>，通常是状态价值函数$V_\pi(s_t^{(n)})$，用于减小方差。</td></tr><tr><td>$\nabla_\theta \log P_\theta(a_t^{(n)}\mid s_t^{(n)})$</td><td><strong>策略梯度项</strong>，表示在状态$s_t^{(n)}$下采取动作$a_t^{(n)}$的对数概率的梯度。</td></tr><tr><td>$P_\theta(a_t^{(n)}\mid s_t^{(n)})$</td><td><strong>参数化策略（policy）</strong>，给定状态$s_t^{(n)}$时采取动作$a_t^{(n)}$的概率，由参数$\theta$控制。</td></tr></tbody></table><hr><p><strong>直观理解</strong>与原始 REINFORCE 相比，这个版本在计算梯度时引入了一个<strong>基线项 $B(s_t^{(n)})$</strong>，用于减少方差但不引入偏差。它衡量“当前动作的回报比期望高多少”：</p><ul><li>如果 $R_t^{(n)} > B(s_t^{(n)})$，说明该动作比平均表现好 → 提高它的概率；</li><li>如果 $R_t^{(n)} < B(s_t^{(n)})$，说明该动作表现差 → 降低它的概率。</li></ul><hr><p><strong>备注</strong>
若将 $A_t^{(n)} = R_t^{(n)} - B(s_t^{(n)})$ 记作<strong>优势函数（advantage function）</strong>，
公式可简写为：</p>$$
\nabla_\theta J(\theta)
\approx
\frac{1}{N}
\sum_{n=1}^{N}
\sum_{t=1}^{T_n}
A_t^{(n)}
\nabla_\theta
\log P_\theta(a_t^{(n)} \mid s_t^{(n)})
$$<h2 id=引入优势函数>引入优势函数</h2><h4 id=优势函数定义>优势函数定义</h4>$$
A_\theta(s, a) = Q_\theta(s, a) - V_\theta(s)
$$<p>在状态 $s$ 下，执行动作 $a$，相比平均水平（状态价值）<strong>能带来多少额外优势</strong>。</p><hr><p>各符号解释</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>$A_\theta(s, a)$</td><td><strong>优势函数（Advantage Function）</strong>，衡量在状态 $s$ 下执行动作 $a$ 比平均表现（$V_\theta(s)$）好多少。</td></tr><tr><td>$Q_\theta(s, a)$</td><td><strong>动作价值函数（Action-Value Function）</strong>：在状态 $s$ 下执行动作 $a$ 后，期望获得的累计回报。</td></tr><tr><td>$V_\theta(s)$</td><td><strong>状态价值函数（State-Value Function）</strong>：在状态 $s$ 下，依据当前策略期望的回报。</td></tr><tr><td>$\theta$</td><td>策略参数，控制策略$\pi_\theta$ 或价值函数的参数化形式。</td></tr></tbody></table><hr><p><strong>直观理解</strong></p><ul><li>$Q_\theta(s,a)$ 衡量“执行某动作后能得到的回报”；</li><li>$V_\theta(s)$ 衡量“在该状态下平均能得到的回报”；</li><li>二者之差 $A_\theta(s,a)$ 衡量“这个动作比平均动作好多少”。</li></ul><p>当 $A_\theta(s,a) > 0$ 时，该动作优于平均水平，应提升其概率；
当 $A_\theta(s,a) < 0$ 时，该动作劣于平均，应降低其概率。</p><hr><h4 id=advantage-policy-gradient-公式>Advantage Policy Gradient 公式</h4>$$
\nabla_\theta J(\theta)
\approx
\frac{1}{N}
\sum_{n=1}^{N}
\sum_{t=1}^{T_n}
A_\theta(s_t^{(n)}, a_t^{(n)})
\nabla_\theta
\log P_\theta(a_t^{(n)} \mid s_t^{(n)})
$$<hr><p>符号解释</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td>$\nabla_\theta J(\theta)$</td><td>期望回报关于参数$\theta$ 的梯度，即策略改进方向。</td></tr><tr><td>$A_\theta(s_t^{(n)}, a_t^{(n)})$</td><td>第$n$ 条轨迹第 $t$ 步的优势值，衡量该动作相对于平均水平的好坏。</td></tr><tr><td>$\log P_\theta(a_t^{(n)} \mid s_t^{(n)})$</td><td>策略函数在状态$s_t^{(n)}$ 下选择动作 $a_t^{(n)}$ 的对数概率。</td></tr><tr><td>$N$</td><td>采样轨迹数量（episodes）。</td></tr><tr><td>$T_n$</td><td>第$n$ 条轨迹的时间步数。</td></tr></tbody></table><hr><h2 id=gae-优势函数generalized-advantage-estimation>GAE 优势函数（Generalized Advantage Estimation）</h2>$$
A_\theta(s_t, a_t) = Q_\theta(s_t, a_t) - V_\theta(s_t)
$$$$
Q_\theta(s_t, a_t) = r_t + \gamma V_\theta(s_{t+1})
$$$$
A_\theta(s_t, a_t) = r_t + \gamma V_\theta(s_{t+1}) - V_\theta(s_t)
$$$$
V_\theta(s_{t+1}) \approx r_{t+1} + \gamma V_\theta(s_{t+2})
$$<div align=left>$$
\begin{aligned}
A_\theta^{1}(s_t, a_t) &= r_t + \gamma V_\theta(s_{t+1}) - V_\theta(s_t) \\
A_\theta^{2}(s_t, a_t) &= r_t + \gamma r_{t+1} + \gamma^2 V_\theta(s_{t+2}) - V_\theta(s_t) \\
A_\theta^{3}(s_t, a_t) &= r_t + \gamma r_{t+1} + \gamma^2 r_{t+2} + \gamma^3 V_\theta(s_{t+3}) - V_\theta(s_t) \\
A_\theta^{T}(s_t, a_t) &= r_t + \gamma r_{t+1} + \gamma^2 r_{t+2} + \gamma^3 r_{t+3} + \cdots + \gamma^{T} r_T - V_\theta(s_t)
\end{aligned}
$$</div>$$
A_\theta^{GAE}(s_t, a_t) = (1 - \lambda)(A_\theta^{1} + \lambda A_\theta^{2} + \lambda^2 A_\theta^{3} + \cdots)
$$<h1 id=grpo>GRPO</h1><h2 id=grpo算法计算每个token的advantage>GRPO算法计算每个Token的Advantage</h2><p><strong>GRPO</strong>：Group Relative Policy Optimization
<strong>中文名称</strong>：群体相对策略优化</p><h4 id=示例输入prompt及生成结果>示例输入（Prompt及生成结果）</h4><p>同一个问题，模型会输出三个结果</p><table><thead><tr><th style=text-align:center>什么</th><th style=text-align:center>是</th><th style=text-align:center>数据库</th><th style=text-align:center>?</th><th style=text-align:center>→</th><th style=text-align:center>数据库</th><th style=text-align:center>用于</th><th style=text-align:center>存储</th><th style=text-align:center>数据</th><th style=text-align:center>。</th><th></th><th></th><th></th></tr></thead><tbody><tr><td style=text-align:center>什么</td><td style=text-align:center>是</td><td style=text-align:center>数据库</td><td style=text-align:center>?</td><td style=text-align:center>→</td><td style=text-align:center>数据库</td><td style=text-align:center>是</td><td style=text-align:center>一个</td><td style=text-align:center>有组织的</td><td style=text-align:center>数据集合</td><td></td><td></td><td></td></tr><tr><td style=text-align:center>什么</td><td style=text-align:center>是</td><td style=text-align:center>数据库</td><td style=text-align:center>?</td><td style=text-align:center>→</td><td style=text-align:center>数据库</td><td style=text-align:center>是</td><td style=text-align:center>用来</td><td style=text-align:center>高效</td><td style=text-align:center>存取</td><td>数据</td><td>的</td><td>软件</td></tr></tbody></table><h4 id=奖励reward>奖励（Reward）</h4><p>对每个句子打一个分</p>$$
r_1 = 3.8, \quad r_2 = 5.2, \quad r_3 = 6.1
$$<p><strong>标准化奖励（Standardized Reward）</strong></p>$$
\tilde{r}_i = \frac{r_i - \text{mean}(r)}{\text{std}(r)}
$$$$
\tilde{r}_1 = -1.06, \quad \tilde{r}_2 = 0.14, \quad \tilde{r}_3 = 0.92
$$<p><strong>每个Token的Advantage表</strong></p><table><thead><tr><th style=text-align:left>Token序列</th><th style=text-align:center>Advantage值</th></tr></thead><tbody><tr><td style=text-align:left>数据库 用于 存储 数据 。</td><td style=text-align:center>-1.06</td></tr><tr><td style=text-align:left>数据库 是 一个 有组织的 数据集合</td><td style=text-align:center>0.14</td></tr><tr><td style=text-align:left>数据库 是 用来 高效 存取 数据 的 软件</td><td style=text-align:center>0.92</td></tr></tbody></table><p>这里代表着每一个token都是Advantage值，例如‘数据库’ ’用于‘ ’存储‘ ’数据‘ 的token都是 -1.</p><h4 id=目标函数>目标函数</h4>$$
J_{GRPO}(\theta) = \frac{1}{G} \sum_{i=1}^G \frac{1}{T_i} \sum_{t=1}^{T_i} \left[ \min \left( \frac{P_\theta(a_{i,t}|s_{i,t})}{P_{\theta'}(a_{i,t}|s_{i,t})} A_i, \text{clip}\left(\frac{P_\theta(a_{i,t}|s_{i,t})}{P_{\theta'}(a_{i,t}|s_{i,t})}, 1-\varepsilon, 1+\varepsilon\right) A_i \right) - \beta D_{KL}(P_\theta \| P_{ref}) \right]
$$<p>其中，$A_i$ 为第 $i$ 个样本的优势值（通常为组内奖励的标准化值），$D_{KL}$ 通常采用无偏估计量：</p>$$
D_{KL}(P_\theta \| P_{ref}) = \frac{P_{ref}(a_t|s_t)}{P_\theta(a_t|s_t)} - \log \frac{P_{ref}(a_t|s_t)}{P_\theta(a_t|s_t)} - 1
$$<h4 id=点评>点评</h4><p>PPO在计算token的优势的时候，Reward模型只把得分到最后一个token里，其他得分都为0，然后用KL散度乘以一个系数加上刚才的得分 得到Reward对整体句子中每一个token的打分，但是对于大模型回答来说，我们评判的是整体的回答，而不是像游戏中那样在某个场景下只关注当下的动作，因此用KL散度乘系数再加上Reward对最后一个token打分这种计算方式，对于评估大模型生成的回答质量实在有些牵强</p><p>简洁来说，PPO只关注最后一个token的优势值，而我们想关注的是一句话作为整体的每个token的优势值。</p><p>GRPO提供了一种不需要训练状态价值网络，就可以估算每个token优势值的方法，而且这个方法更适合大模型生成强化学习这个场景</p><p>实际代码中，Clip和KL散度用一个就行了。</p><hr><h3 id=其他变体>其他变体</h3><ul><li><a href=https://arxiv.org/abs/2402.03300 target=_blank class="inline-flex items-center gap-1">GRPO<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- DeepSeekMath (February 2024)</li><li><a href=https://arxiv.org/abs/2503.14476 target=_blank class="inline-flex items-center gap-1">DAPO<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- Decoupled Clip and Dynamic Sampling Policy Optimization (March 2025)</li><li><a href=https://arxiv.org/abs/2510.04474 target=_blank class="inline-flex items-center gap-1">Dr.DRPO<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- Decoupled Reward Policy Optimization (October 2025)</li><li><a href=https://arxiv.org/abs/2508.09726 target=_blank class="inline-flex items-center gap-1">GFPO<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- Group Filtered Policy Optimization (August 2025)</li><li><a href=https://arxiv.org/abs/2512.02556 target=_blank class="inline-flex items-center gap-1">DeepSeek-V3.2<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- DeepSeek-V3.2: Pushing the Frontier of Open Large Language Models (December 2025)</li><li><a href=https://arxiv.org/abs/2510.08191 target=_blank class="inline-flex items-center gap-1">Training-Free GRPO<svg class="h-3 w-3 flex-shrink-0" id="external-link" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 3h6v6m-11 5L21 3m-3 10v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/></svg>
</a>- Tencent: Training-Free Group Relative Policy Optimization (October 2025)</li></ul><hr><h3 id=附录不同规模模型的推荐学习率参考>附录：不同规模模型的推荐学习率参考</h3><p>以下表格整理了在不同模型规模下，<strong>SFT</strong>（指令微调）与 <strong>DPO</strong>（偏好优化）的推荐学习率区间。数据主要基于 LoRA/QLoRA 微调场景。</p><table><thead><tr><th style=text-align:left>模型规模 (Model Scale)</th><th style=text-align:left>SFT 推荐 LR (LoRA)</th><th style=text-align:left>DPO 推荐 LR</th><th style=text-align:left>备注 (Notes)</th></tr></thead><tbody><tr><td style=text-align:left><strong>0.5B - 1.8B</strong></td><td style=text-align:left><strong>2e-4 — 5e-4</strong></td><td style=text-align:left><strong>5e-6 — 1e-5</strong></td><td style=text-align:left>模型较小，相对“坚韧”，可以使用较大的步长快速收敛。</td></tr><tr><td style=text-align:left><strong>7B - 8B</strong></td><td style=text-align:left><strong>5e-5 — 1e-4</strong></td><td style=text-align:left><strong>1e-6 — 3e-6</strong></td><td style=text-align:left>主流模型规模（如 Llama 3, Qwen 2.5）。<strong>5e-7</strong> 通常是下限，过低会导致收敛极慢。</td></tr><tr><td style=text-align:left><strong>14B - 32B</strong></td><td style=text-align:left><strong>1e-5 — 5e-5</strong></td><td style=text-align:left><strong>5e-7 — 1e-6</strong></td><td style=text-align:left>参数量较大，即使是 LoRA 也需要非常小心，LR 过大容易导致灾难性遗忘。</td></tr><tr><td style=text-align:left><strong>70B+</strong></td><td style=text-align:left><strong>5e-6 — 1e-5</strong></td><td style=text-align:left><strong>1e-7 — 5e-7</strong></td><td style=text-align:left>极小的步长，通常配合极大的 Batch Size 进行训练。</td></tr></tbody></table><blockquote class="border-primary bg-muted/30 hover:bg-muted/40 my-6 rounded-r-lg border-l-4 py-4 pr-4 pl-6 italic transition-all duration-200 ease-out hover:translate-x-1"><div class="prose prose-sm max-w-none"><p><strong>关键指标参考</strong>：</p><ul><li><strong>GRPO</strong>: 学习率通常建议 <strong>≤ 1e-5</strong> (Full) 或 <strong>5e-5</strong> (LoRA)，Beta 推荐 <strong>0.001</strong>。</li><li><strong>DPO 监控</strong>: 重点关注 <code>rewards/chosen</code>、<code>rewards/rejected</code> 和 <code>rewards/margins</code>。</li></ul></div></blockquote><script>function toggleAlert(e){const t=document.getElementById(e+"-content"),n=document.getElementById(e+"-chevron"),s=t.previousElementSibling;t.classList.contains("hidden")?(t.classList.remove("hidden"),n.style.transform="rotate(0deg)",s.setAttribute("aria-expanded","true")):(t.classList.add("hidden"),n.style.transform="rotate(-90deg)",s.setAttribute("aria-expanded","false"))}document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".alert-content.hidden");e.forEach(function(e){const n=e.id.replace("-content",""),t=document.getElementById(n+"-chevron");t&&(t.style.transform="rotate(-90deg)")})})</script></article><div class="post-license bg-muted/30 border-border mb-8 rounded-xl border p-6"><div class="flex items-start gap-4"><div class="bg-primary/10 flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-lg"><svg class="h-6 w-6" aria-label="许可证" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955.0 0112 2.944a11.955 11.955.0 01-8.618 3.04A12.02 12.02.0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622.0-1.042-.133-2.052-.382-3.016z"/></svg></div><div class="flex-1 min-w-0"><h3 class="text-foreground mb-2 text-lg font-semibold">Copyright Notice</h3><div class="text-muted-foreground space-y-2 text-sm"><p><strong>Author:</strong>
Hugo Narrow</p><p><strong>Link:</strong>
<a href=https://mydocts.github.io/jiatong.github.io/posts/grpo-variants/ class="text-primary hover:text-primary/80 transition-colors break-all hyphens-auto duration-200">https://mydocts.github.io/jiatong.github.io/posts/grpo-variants/</a></p><p><strong>License:</strong>
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/ target=_blank rel="noopener noreferrer" class="text-primary hover:text-primary/80 transition-colors duration-200">CC BY-NC-SA 4.0</a></p><p class=text-xs>This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. Please attribute the source, use non-commercially, and maintain the same license.</p></div></div></div></div><nav class="post-navigation mb-12" aria-label="Post navigation"><div class="grid grid-cols-1 gap-4 md:grid-cols-2"><div class=nav-item><a href=https://mydocts.github.io/jiatong.github.io/posts/dpo/ class="group bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex min-h-[140px] flex-col justify-between rounded-xl border p-6 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none"><div><div class="mb-3 flex items-center gap-3"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
<span class="text-muted-foreground text-sm font-medium">Previous</span></div><h3 class="text-foreground group-hover:text-primary mb-3 line-clamp-2 text-lg leading-tight font-semibold transition-colors duration-200">LLM-RL-DPO</h3></div><div class="text-muted-foreground mt-auto flex items-center gap-2 text-xs"><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg>
<time datetime=2025-12-09>Dec 09</time></div></a></div><div class=nav-item><a href=https://mydocts.github.io/jiatong.github.io/posts/translate/ class="group bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex min-h-[140px] flex-col justify-between rounded-xl border p-6 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none"><div><div class="mb-3 flex items-center justify-end gap-3"><span class="text-muted-foreground text-sm font-medium">Next
</span><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg></div><h3 class="text-foreground group-hover:text-primary mb-3 line-clamp-2 text-right text-lg leading-tight font-semibold transition-colors duration-200">Translate-Paper</h3></div><div class="text-muted-foreground mt-auto flex items-center justify-end gap-2 text-xs"><time datetime=2025-12-23>Dec 23
</time><svg class="h-3 w-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v12a2 2 0 002 2z"/></svg></div></a></div></div></nav><section class="related-posts mb-12"><div class="mb-6 flex items-center gap-3"><svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656.0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656.0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"/></svg><h2 class="text-foreground text-2xl font-bold">Related Posts</h2></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 w-full"><article class=group><a href=https://mydocts.github.io/jiatong.github.io/posts/dpo/ class=block><div class="bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex items-center rounded-xl border p-5 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none min-h-[120px]"><h3 class="text-foreground group-hover:text-primary text-lg font-semibold leading-snug line-clamp-3 w-full">LLM-RL-DPO</h3></div></a></article><article class=group><a href=https://mydocts.github.io/jiatong.github.io/posts/ppo/ class=block><div class="bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex items-center rounded-xl border p-5 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none min-h-[120px]"><h3 class="text-foreground group-hover:text-primary text-lg font-semibold leading-snug line-clamp-3 w-full">LLM-RL-PPO</h3></div></a></article></div></section></main><footer class="mx-auto max-w-4xl px-4 py-8"><div class="px-6 py-6"><nav class=mb-6><div class="flex flex-wrap items-center justify-center gap-1"><a href=https://mydocts.github.io/jiatong.github.io/about/ class="nav-link hover:text-primary hover:bg-primary/10 text-muted-foreground flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105"><svg class="h-5 w-5" aria-label="About" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7A4 4 0 118 7a4 4 0 018 0zm-4 7a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
<span>About
</span></a><a href=https://google.com target=_blank rel="noopener noreferrer" class="nav-link hover:text-primary hover:bg-primary/10 text-muted-foreground flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105"><svg class="h-5 w-5" aria-label="Contact" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22.0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v10a2 2 0 002 2z"/></svg>
<span>Contact
</span></a><a href=https://mydocts.github.io/jiatong.github.io/index.xml class="nav-link hover:text-primary hover:bg-primary/10 text-muted-foreground flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 hover:scale-105"><svg class="h-5 w-5" aria-label="RSS Feed" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 5c7.18.0 13 5.82 13 13M6 11a7 7 0 017 7m-6 0a1 1 0 11-2 0 1 1 0 012 0z"/></svg>
<span>RSS Feed</span></a></div></nav><div class="border-border mb-6 border-t"></div><div class="flex flex-col items-center justify-between gap-4 md:flex-row"><div class="text-muted-foreground text-sm text-center md:text-left"><p class=mb-2>&copy; 2025 Jiatong Blog.
All rights reserved.</p><p class="flex flex-wrap items-center justify-center gap-1 md:justify-start"><span>Powered by</span>
<a href=https://gohugo.io/ target=_blank rel="noopener noreferrer" class="text-primary hover:text-primary/80 font-medium transition-colors duration-200 hover:underline">Hugo
</a><span>&</span>
<a href=https://github.com/tom2almighty/hugo-narrow target=_blank rel="noopener noreferrer" class="text-primary hover:text-primary/80 font-medium transition-colors duration-200 hover:underline">Narrow</a></p></div><div class="flex items-center gap-3"><a href=https://github.com/username target=_blank rel="noopener noreferrer" class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=GitHub aria-label=GitHub><svg class="h-6 w-6" aria-label="GitHub" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M15 22v-4a4.8 4.8.0 00-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35.0-3.5.0.0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35.0 3.5A5.4 5.4.0 004 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65S8.93 17.38 9 18v4"/><path d="M9 18c-4.51 2-5-2-7-2"/></g></svg>
</a><a href=https://twitter.com/username target=_blank rel="noopener noreferrer" class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=Twitter aria-label=Twitter><svg class="h-6 w-6" aria-label="Twitter" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1.0 3-1.2 3-1.2"/></svg>
</a><a href=https://linkedin.com/in/username target=_blank rel="noopener noreferrer" class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=LinkedIn aria-label=LinkedIn><svg class="h-6 w-6" aria-label="LinkedIn" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6M2 9h4v12H2z"/><circle cx="4" cy="4" r="2"/></g></svg>
</a><a href=mailto:your.email@example.com class="text-muted-foreground hover:text-primary focus:ring-primary/20 rounded-lg p-1 transition-all duration-300 ease-out hover:scale-110 focus:ring-2 focus:outline-none" title=Email aria-label=Email><svg class="h-6 w-6" aria-label="Email" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22.0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v10a2 2 0 002 2z"/></svg></a></div></div></div></footer><div id=dock class="pointer-events-none fixed bottom-4 left-1/2 z-[9999] w-fit -translate-x-1/2 translate-y-24 opacity-0 transition-all duration-300 ease-out sm:right-0 sm:left-0 sm:mx-auto sm:translate-x-0" data-dock-mode=always role=toolbar aria-label="Quick action toolbar"><nav class="border-border bg-card/80 scrollbar-hide xs:px-3 xs:py-2 mx-auto flex max-w-[calc(100vw-2rem)] min-w-fit items-center justify-center overflow-x-auto rounded-2xl border px-4 py-3 shadow-lg backdrop-blur-sm sm:px-4 sm:py-3"><button id=dock-back class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title=Back aria-label=Back>
<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></svg>
<span class="hidden sm:inline">Back</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-toc class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title="Table of Contents" aria-label="Table of Contents">
<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>
<span class="hidden sm:inline">Table of Contents</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-search class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-3 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-4 sm:py-2" title=Search aria-label=Search>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg>
<span class="hidden md:inline">Search</span></button><div class="bg-border xs:mx-1 mx-2 h-6 w-px sm:mx-2"></div><button id=dock-top class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 xs:px-2 xs:py-1.5 flex flex-shrink-0 items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-all duration-300 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none sm:px-3 sm:py-2" title="Back to Top" aria-label="Back to Top">
<svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 15-6-6-6 6"/></svg>
<span class="hidden sm:inline">Top</span></button></nav></div><div id=toc-overlay class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 backdrop-blur-sm transition-all duration-300" role=dialog aria-modal=true aria-labelledby=toc-title></div><div id=toc-card class="pointer-events-none fixed inset-4 z-50 flex w-auto scale-95 items-center justify-center opacity-0 transition-all duration-300 sm:inset-auto sm:top-1/2 sm:left-1/2 sm:block sm:w-full sm:max-w-md sm:-translate-x-1/2 sm:-translate-y-1/2" role=dialog aria-modal=true aria-labelledby=toc-title><div class="bg-card border-border w-full max-w-sm overflow-hidden rounded-xl border shadow-xl sm:max-w-md"><div class="border-border bg-muted/30 flex items-center justify-between border-b p-4"><div class="flex items-center gap-3"><svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg><h2 id=toc-title class="text-foreground text-lg font-semibold">Table of Contents</h2></div><button id=toc-close class="text-muted-foreground hover:text-primary hover:bg-primary/10 focus:ring-primary/20 rounded-lg p-2 transition-all duration-200 ease-out hover:-translate-y-0.5 hover:scale-105 focus:ring-2 focus:outline-none" title=Close aria-label=Close>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div class="max-h-96 overflow-y-auto p-4"><nav id=toc-nav class=toc-scrollbar aria-label="Table of Contents Navigation"><div id=toc-content><nav id=TableOfContents><ul><li><a href=#policy-gradient>Policy Gradient</a></li><li><a href=#考虑动作影响时效>考虑动作影响时效</a></li><li><a href=#考虑到动作的相对优势>考虑到动作的相对优势</a></li><li><a href=#引入优势函数>引入优势函数</a><ul><li><ul><li><a href=#优势函数定义>优势函数定义</a></li><li><a href=#advantage-policy-gradient-公式>Advantage Policy Gradient 公式</a></li></ul></li></ul></li><li><a href=#gae-优势函数generalized-advantage-estimation>GAE 优势函数（Generalized Advantage Estimation）</a></li></ul><ul><li><a href=#grpo算法计算每个token的advantage>GRPO算法计算每个Token的Advantage</a><ul><li><ul><li><a href=#示例输入prompt及生成结果>示例输入（Prompt及生成结果）</a></li><li><a href=#奖励reward>奖励（Reward）</a></li><li><a href=#目标函数>目标函数</a></li><li><a href=#点评>点评</a></li></ul></li><li><a href=#其他变体>其他变体</a></li><li><a href=#附录不同规模模型的推荐学习率参考>附录：不同规模模型的推荐学习率参考</a></li></ul></li></ul></nav></div></nav></div><div class="border-border bg-muted/20 border-t px-4 py-3"><div class="text-muted-foreground text-center text-xs"><span>Click to jump to the section</span></div></div></div></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css integrity=sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js integrity=sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/contrib/auto-render.min.js integrity=sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh crossorigin=anonymous></script><script>function initKaTeX(){if(typeof renderMathInElement=="undefined"){setTimeout(initKaTeX,100);return}var e=[{display:!0,left:"$$",right:"$$"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"},{display:!0,left:"\\[",right:"\\]"}];renderMathInElement(document.body,{delimiters:e,throwOnError:!1,errorColor:"#cc0000",fleqn:!1,leqno:!1,trust:!1})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",initKaTeX):initKaTeX()</script><div id=search-overlay class="pointer-events-none fixed inset-0 z-40 bg-black/50 opacity-0 transition-opacity duration-300"></div><div id=search-modal class="bg-card border-border pointer-events-none fixed top-1/2 left-1/2 z-50 max-h-[80vh] w-full max-w-2xl -translate-x-1/2 -translate-y-1/2 scale-95 transform overflow-hidden rounded-xl border opacity-0 shadow-xl transition-all duration-300"><div class="border-border flex items-center gap-3 border-b p-4"><div class="text-muted-foreground h-5 w-5 flex-shrink-0"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></div><div class="relative flex-1"><button id=search-clear class="text-muted-foreground hover:text-foreground hover:bg-muted/50 pointer-events-none absolute top-1/2 left-0 z-10 h-5 w-5 -translate-y-1/2 rounded opacity-0 transition-all duration-200" title=Clear aria-label=Clear>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg>
</button>
<input id=search-input type=text placeholder="Search posts..." class="text-foreground placeholder:text-muted-foreground w-full border-none bg-transparent pl-8 text-lg outline-none" autocomplete=off spellcheck=false></div><button id=search-close class="text-muted-foreground hover:text-foreground hover:bg-muted/50 flex h-6 w-6 items-center justify-center rounded-md p-0.5 transition-all duration-200" title=Close aria-label=Close>
<svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div id=search-results class="max-h-96 overflow-y-auto"><div id=search-empty class="flex flex-col items-center justify-center py-12 text-center"><div class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-6-6m2-5A7 7 0 113 10a7 7 0 0114 0z"/></svg></div><h3 class="text-foreground mb-2 text-lg font-semibold">Start searching</h3><p class="text-muted-foreground text-sm">Enter keywords to search articles</p></div><div id=search-loading class="flex hidden items-center justify-center py-8"><div class="mr-3 h-6 w-6 animate-spin rounded-full border-2 border-current border-t-transparent"></div><span class=text-muted-foreground>Searching...</span></div><div id=search-no-results class="flex hidden flex-col items-center justify-center py-12 text-center"><div class="bg-muted/50 mb-4 flex h-16 w-16 items-center justify-center rounded-full"><svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/></svg></div><h3 class="text-foreground mb-2 text-lg font-semibold">No results found</h3><p class="text-muted-foreground text-sm">Try using different keywords</p></div><div id=search-results-list class=hidden><div id=search-stats class="text-muted-foreground border-border border-b px-4 py-3 text-sm" data-template="Found %d results"></div><div id=search-items class="divide-border divide-y"></div></div></div><div class="border-border bg-muted/20 border-t px-4 py-3"><div class="text-muted-foreground flex items-center justify-between text-xs"><div class="flex items-center gap-2 md:gap-4"><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">↑↓</kbd>
<span class="hidden sm:inline">Navigate</span></div><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">↵</kbd>
<span class="hidden sm:inline">Select</span></div><div class="flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">ESC</kbd>
<span class="hidden sm:inline">Close</span></div></div><div class="search-hint-desktop flex items-center gap-1"><kbd class="bg-muted border-border rounded border px-1.5 py-0.5 text-xs">⌘K</kbd>
<span>Shortcut</span></div></div></div></div></body></html>